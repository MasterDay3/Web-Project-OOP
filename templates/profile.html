<!DOCTYPE html>
<html lang="uk">

<head>
    <meta charset="UTF-8">
    <title>Numerix ¬∑ –ü—Ä–æ—Ñ—ñ–ª—å</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>

<body class="page-light">
    <header class="nav-bar">
        <div class="brand">
            <span class="brand-dot"></span>
            <span class="brand-name">Numerix</span>
        </div>
        <nav class="nav-links">
            <a href="{{ url_for('home') }}">–ö–æ–Ω–≤–µ—Ä—Ç–æ—Ä</a>
            <a href="{{ url_for('calculator_page') }}">–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä</a>
            <a href="{{ url_for('task_routes.tasks_page') }}">–ó–∞–¥–∞—á—ñ</a>
            <a href="{{ url_for('leaderboard_routes.leaderboard') }}">Leaderboard</a>
        </nav>
        <a class="ghost" href="{{ url_for('dashboard') }}">Dashboard</a>
        <a class="cta-nav" href="{{ url_for('auth_routes.logout') }}">–í–∏–π—Ç–∏</a>
    </header>

    <main class="shell">
        <section class="hero">
            <p class="eyebrow">–ê–∫–∞—É–Ω—Ç</p>
            <h1>–ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –ø—Ä–æ—Ñ—ñ–ª—é</h1>
        </section>

        {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
        {% for category, msg in messages %}
        <div class="profile-alert {{ category }}">{{ msg }}</div>
        {% endfor %}
        {% endif %}
        {% endwith %}

        <div class="profile-grid">

            <!-- –û—Å–æ–±–∏—Å—Ç–∞ —ñ–Ω—Ñ–æ -->
            <section class="glass-card profile-card">
                <h2>–û—Å–æ–±–∏—Å—Ç–∞ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è</h2>
                <form method="POST">
                    <input type="hidden" name="action" value="update_info">
                    <label class="profile-label">
                        –Ü–º º—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞
                        <input type="text" name="username" value="{{ current_user.username }}" required>
                    </label>
                    <label class="profile-label">
                        Email
                        <input type="email" name="email" value="{{ current_user.email }}" required>
                    </label>
                    <button class="cta" type="submit">–ó–±–µ—Ä–µ–≥—Ç–∏</button>
                </form>
            </section>

            <!-- –ó–º—ñ–Ω–∞ –ø–∞—Ä–æ–ª—è -->
            <section class="glass-card profile-card">
                <h2>–ó–º—ñ–Ω–∞ –ø–∞—Ä–æ–ª—è</h2>
                <form method="POST">
                    <input type="hidden" name="action" value="update_password">
                    <label class="profile-label">
                        –°—Ç–∞—Ä–∏–π –ø–∞—Ä–æ–ª—å
                        <input type="password" name="old_password" required>
                    </label>
                    <label class="profile-label">
                        –ù–æ–≤–∏–π –ø–∞—Ä–æ–ª—å
                        <input type="password" name="new_password" required>
                    </label>
                    <label class="profile-label">
                        –ü—ñ–¥—Ç–≤–µ—Ä–¥–∏—Ç–∏ –ø–∞—Ä–æ–ª—å
                        <input type="password" name="confirm_password" required>
                    </label>
                    <button class="cta" type="submit">–ó–º—ñ–Ω–∏—Ç–∏ –ø–∞—Ä–æ–ª—å</button>
                </form>
            </section>

            <!-- –î–µ–Ω–Ω–∞ —Ü—ñ–ª—å -->
            <section class="glass-card profile-card">
                <h2>–î–µ–Ω–Ω–∞ —Ü—ñ–ª—å</h2>
                <p class="profile-muted">–°–∫—ñ–ª—å–∫–∏ –∑–∞–¥–∞—á —Ç–∏ —Ö–æ—á–µ—à —Ä–æ–±–∏—Ç–∏ —â–æ–¥–Ω—è?</p>
                <form method="POST">
                    <input type="hidden" name="action" value="update_goal">
                    <label class="profile-label">
                        –ö—ñ–ª—å–∫—ñ—Å—Ç—å –∑–∞–¥–∞—á –Ω–∞ –¥–µ–Ω—å
                        <input type="number" name="daily_goal" value="{{ current_user.daily_goal }}" min="1" max="200">
                    </label>
                    <button class="cta" type="submit">–ó–±–µ—Ä–µ–≥—Ç–∏</button>
                </form>

                <!-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ -->
                <div class="profile-stats">
                    <div class="stat-item">
                        <span class="stat-val">{{ current_user.level }}</span>
                        <span class="stat-lbl">–†—ñ–≤–µ–Ω—å</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-val">{{ current_user.xp }}</span>
                        <span class="stat-lbl">XP</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-val">üî• {{ current_user.streak }}</span>
                        <span class="stat-lbl">–°—Ç—Ä—ñ–∫</span>
                    </div>
                </div>
            </section>

        </div>
    </main>

    <style>
        .profile-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
        }

        .profile-card {
            padding: 28px;
            display: grid;
            gap: 16px;
        }

        .profile-card h2 {
            margin: 0;
            font-size: 20px;
        }

        .profile-muted {
            margin: 0;
            color: var(--muted);
            font-size: 14px;
        }

        .profile-label {
            display: grid;
            gap: 6px;
            font-weight: 700;
            color: var(--ink);
        }

        .profile-label input {
            padding: 11px 14px;
            border: 1.5px solid var(--border);
            border-radius: 12px;
            font-size: 15px;
            background: #fff;
        }

        .profile-label input:focus {
            border-color: var(--accent);
            outline: none;
            box-shadow: 0 0 0 3px rgba(178, 31, 31, 0.1);
        }

        .profile-alert {
            padding: 12px 16px;
            border-radius: 12px;
            font-weight: 700;
            margin-bottom: 16px;
        }

        .profile-alert.success {
            background: #f0fdf4;
            color: #15803d;
            border: 1px solid #bbf7d0;
        }

        .profile-alert.error {
            background: #fef2f2;
            color: #b91c1c;
            border: 1px solid #fecaca;
        }

        .profile-stats {
            display: flex;
            gap: 20px;
            padding-top: 8px;
            border-top: 1px solid var(--border);
        }

        .stat-item {
            display: grid;
            gap: 2px;
            text-align: center;
        }

        .stat-val {
            font-size: 22px;
            font-weight: 800;
            color: var(--accent);
        }

        .stat-lbl {
            font-size: 12px;
            color: var(--muted);
            font-weight: 600;
        }
    </style>
</body>

</html>