<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <title>Numerix Â· ĞšĞ¾Ğ½Ğ²ĞµÑ€Ñ‚Ğ¾Ñ€</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body class="page-light">
  <header class="nav-bar">
    <div class="brand">
      <span class="brand-dot"></span>
      <span class="brand-name">Numerix</span>
    </div>
    <nav class="nav-links">
      <a href="{{ url_for('home') }}" class="active">ĞšĞ¾Ğ½Ğ²ĞµÑ€Ñ‚Ğ¾Ñ€</a>
      <a href="{{ url_for('calculator_page') }}">ĞšĞ°Ğ»ÑŒĞºÑƒĞ»ÑÑ‚Ğ¾Ñ€</a>
    </nav>
    <a class="ghost" href="{{ url_for('auth_routes.login') }}">Ğ£Ğ²Ñ–Ğ¹Ñ‚Ğ¸</a>
    <a class="cta-nav" href="{{ url_for('auth_routes.register') }}">Sign up</a>
  </header>

  <main class="shell">
    <section class="hero" id="convert">
      <p class="eyebrow">Roman Â· Arabic Â· Egyptian Â· Thai</p>
      <h1>ĞšĞ¾Ğ½Ğ²ĞµÑ€Ñ‚Ğ¾Ñ€ Ñ‡Ğ¸ÑĞ»Ğ¾Ğ²Ğ¸Ñ… ÑĞ¸ÑÑ‚ĞµĞ¼</h1>
    </section>

    {% set sf = system_from or 'roman' %}
    {% set st = system_to or 'arabic' %}
    {% set placeholder_from = {
      'roman': 'I Â· V Â· X Â· L Â· C Â· D Â· M',
      'arabic': '0 1 2 3 4 5 6 7 8 9',
      'egyptian': 'ğ“€¼ ğ“† ğ“‚­ ğ“†¼ ğ“¢ ğ“† ğ“½',
      'thai': 'à¹ à¹‘ à¹’ à¹“ à¹” à¹• à¹– à¹— à¹˜ à¹™'
    }[sf] %}
    {% set placeholder_to = {
      'roman': 'I Â· V Â· X Â· L Â· C Â· D Â· M',
      'arabic': '0 1 2 3 4 5 6 7 8 9',
      'egyptian': 'ğ“€¼ ğ“† ğ“‚­ ğ“†¼ ğ“¢ ğ“† ğ“½',
      'thai': 'à¹ à¹‘ à¹’ à¹“ à¹” à¹• à¹– à¹— à¹˜ à¹™'
    }[st] %}
    {% set placeholder_from = {
      'roman': 'I Â· V Â· X Â· L Â· C Â· D Â· M',
      'arabic': '0 1 2 3 4 5 6 7 8 9',
      'egyptian': 'ğ“€¼ ğ“† ğ“‚­ ğ“†¼ ğ“¢ ğ“† ğ“½',
      'thai': 'à¹ à¹‘ à¹’ à¹“ à¹” à¹• à¹– à¹— à¹˜ à¹™'
    }[sf] %}
    {% set placeholder_to = {
      'roman': 'I Â· V Â· X Â· L Â· C Â· D Â· M',
      'arabic': '0 1 2 3 4 5 6 7 8 9',
      'egyptian': 'ğ“€¼ ğ“† ğ“‚­ ğ“†¼ ğ“¢ ğ“† ğ“½',
      'thai': 'à¹ à¹‘ à¹’ à¹“ à¹” à¹• à¹– à¹— à¹˜ à¹™'
    }[st] %}

    <section class="converter">
      <form class="glass-card converter-card" action="/convert" method="POST">
        <div class="convert-head">
          <div class="head-col">
            <span>From</span>
            <select name="system_from">
              <option value="arabic"   {% if sf=='arabic' %}selected{% endif %}>Arabic</option>
              <option value="roman"    {% if sf=='roman' %}selected{% endif %}>Roman</option>
              <option value="egyptian" {% if sf=='egyptian' %}selected{% endif %}>Egyptian</option>
              <option value="thai"     {% if sf=='thai' %}selected{% endif %}>Thai</option>
            </select>
          </div>
          <button type="button" class="swap" onclick="swapSystems()">â‡„</button>
          <div class="head-col">
            <span>To</span>
            <select name="system_to">
              <option value="arabic"   {% if st=='arabic' %}selected{% endif %}>Arabic</option>
              <option value="roman"    {% if st=='roman' %}selected{% endif %}>Roman</option>
              <option value="egyptian" {% if st=='egyptian' %}selected{% endif %}>Egyptian</option>
              <option value="thai"     {% if st=='thai' %}selected{% endif %}>Thai</option>
            </select>
          </div>
        </div>

        <div class="convert-body">
          <input class="side-input" id="value-input" type="text" name="value" value="{{ value or '' }}" placeholder="{{ placeholder_from }}" required>
          <div class="side-divider"></div>
          <div class="result-view" id="result-view" {% if result is not none %}data-locked="1"{% endif %}>{{ result if result is not none else placeholder_to }}</div>
        </div>

        <div class="convert-actions">
          <button class="cta" type="submit">ĞšĞ¾Ğ½Ğ²ĞµÑ€Ñ‚ÑƒĞ²Ğ°Ñ‚Ğ¸</button>
        </div>
      </form>

      {% if sf == 'roman' %}
      <section class="glass-card breakdown">
        <h3>{{ value or placeholder_from }}</h3>
        <div class="break-grid">
          {% if value and st == 'arabic' %}
            <div><p class="token">M</p><p class="token-sub">1000</p></div>
            <div><p class="token">DCC</p><p class="token-sub">700</p></div>
            <div><p class="token">X</p><p class="token-sub">10</p></div>
            <div><p class="token">IV</p><p class="token-sub">4</p></div>
          {% else %}
            <div><p class="token">I</p><p class="token-sub">1</p></div>
            <div><p class="token">V</p><p class="token-sub">5</p></div>
            <div><p class="token">X</p><p class="token-sub">10</p></div>
            <div><p class="token">L</p><p class="token-sub">50</p></div>
          {% endif %}
        </div>
        <p class="break-total">{{ result or placeholder_to }}</p>
      </section>
      {% endif %}
    </section>
  </main>

  <script>
    const placeholders = {
      roman: 'I Â· V Â· X Â· L Â· C Â· D Â· M',
      arabic: '0 1 2 3 4 5 6 7 8 9',
      egyptian: 'ğ“€¼ ğ“† ğ“‚­ ğ“†¼ ğ“¢ ğ“† ğ“½',
      thai: 'à¹ à¹‘ à¹’ à¹“ à¹” à¹• à¹– à¹— à¹˜ à¹™'
    };

    const fromSel = document.querySelector('select[name="system_from"]');
    const toSel   = document.querySelector('select[name="system_to"]');
    const valueInput = document.getElementById('value-input');
    const resultView = document.getElementById('result-view');

    function swapSystems() {
      const tmp  = fromSel.value; fromSel.value = toSel.value; toSel.value = tmp;
      clearResult();
      updatePlaceholders();
    }

    function updatePlaceholders() {
      valueInput.placeholder = placeholders[fromSel.value] || '';
      if (!resultView.dataset.locked) {
        resultView.textContent = placeholders[toSel.value] || '';
      }
    }

    function clearResult() {
      delete resultView.dataset.locked;
      resultView.textContent = placeholders[toSel.value] || '';
    }

    fromSel?.addEventListener('change', () => { clearResult(); updatePlaceholders(); });
    toSel?.addEventListener('change',   () => { clearResult(); updatePlaceholders(); });
    valueInput?.addEventListener('input', () => { clearResult(); });

    updatePlaceholders();
  </script>
</body>
</html>
